apply plugin: 'groovy'

description 'Gradle plugin for running SoapUI projects'
group 'com.lv.plugins'
version = '0.1'

repositories {
    if( project.hasProperty('internalArtifactRepository') ){
        maven { url project.internalArtifactRepository }
    } else {
        mavenCentral()
        jcenter()
    }
}

dependencies {
    compile localGroovy()
    compile gradleApi()

    /**
     * SoapUI dependencies
     */
    compile files('D:\\tools\\SoapUI-5.0.0\\bin\\soapui-5.0.0.jar')
    compile fileTree(dir: "D:\\tools\\SoapUI-5.0.0\\lib", include: '*.jar')

    testCompile 'com.netflix.nebula:nebula-test:1.12.2'
}

sourceSets {
    integTest {
        java.srcDir file('src/integTest/groovy')
        resources.srcDir file('src/integTest/resources')
    }
}

task integTest(type: Test) {
    testClassesDir = sourceSets.integTest.output.classesDir
    classpath = sourceSets.integTest.runtimeClasspath
}

check.dependsOn integTest